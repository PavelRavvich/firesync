#!/bin/bash
# Pre-commit hook: Run tests before commit
#
# Installation:
#   cp .githooks/pre-commit .git/hooks/pre-commit
#   chmod +x .git/hooks/pre-commit

echo "[!] Running tests before commit..."

# Run tests with PYTHONPATH set to src/
PYTHONPATH=src python3 -m unittest discover tests -v

# Check exit status
if [ $? -ne 0 ]; then
    echo ""
    echo "[!] Tests failed! Commit aborted."
    echo "[!] Fix the failing tests before committing."
    exit 1
fi

echo ""
echo "[+] All tests passed! Proceeding with commit..."
exit 0
